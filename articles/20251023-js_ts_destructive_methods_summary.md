---
title: "JavaScriptã§é…åˆ—ã‚’ç ´å£Šã—ãªã„æ–¹æ³•ã¾ã¨ã‚"
emoji: "ğŸ’­"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["javascript", "typescript", "é…åˆ—"]
published: true
publication_name: leaner_dev
---

ãƒªãƒ¼ãƒŠãƒ¼è³¼è²·é–‹ç™ºãƒãƒ¼ãƒ ã® [@glico800](https://x.com/glico800) ã§ã™ã€‚

æœ€è¿‘é¹¿é‡ã•ã‚“ã®ãƒã‚¹ãƒˆã‚’è¦‹ã¦ã€ECMAScript2023 ã§è¿½åŠ ã•ã‚ŒãŸé…åˆ—ã®éç ´å£Šãƒ¡ã‚½ãƒƒãƒ‰ã®ã“ã¨ã‚’çŸ¥ã‚‰ãªã‹ã£ãŸã®ã§ã€æ–°ãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ å¾Œã®ã€Œé…åˆ—ã‚’ç ´å£Šã—ãªã„æ–¹æ³•ã€ã‚’ã¾ã¨ã‚ã¦ã¿ã¾ã—ãŸã€‚

https://x.com/tonkotsuboy_com/status/1974076338027016274

# ã¯ã˜ã‚ã«
## é…åˆ—æ“ä½œã«ãŠã‘ã‚‹ç ´å£Šãƒ»éç ´å£Šã¨ã¯ï¼Ÿ
â€»æ™®æ®µã€ç ´å£Šãƒ»éç ´å£Šã¨ã„ã†è¡¨ç¾ã‚’ä½¿ã‚ãªã„è¨€èªã‚’è§¦ã£ã¦ã„ã‚‹æ–¹å‘ã‘ã§ã™ã€‚


é…åˆ—ãªã©ã®ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã«å¯¾ã™ã‚‹å‡¦ç†ã®ã†ã¡ã€å…ƒã®ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã®å€¤ã‚’ç›´æ¥æ›¸ãæ›ãˆã‚‹ã‚‚ã®ã‚’ã€Œç ´å£Šçš„ã€ã€å…ƒã®ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã®å€¤ã‚’ç¶­æŒã™ã‚‹ã‚‚ã®ã‚’ã€Œéç ´å£Šçš„ã€ã¨å‘¼ã³ã¾ã™ã€‚ãƒ¡ã‚½ãƒƒãƒ‰ã®å ´åˆã‚‚ãã®æ€§è³ªã«å¿œã˜ã¦ã€Œç ´å£Šçš„ãƒ¡ã‚½ãƒƒãƒ‰ã€ã€Œéç ´å£Šçš„ãƒ¡ã‚½ãƒƒãƒ‰ã€ã®ã‚ˆã†ã«å‘¼ã³ã¾ã™ã€‚

ã¡ãªã¿ã«ç ´å£Šçš„æ“ä½œã¯ `in-place` ã¨ã„ã†ç”¨èªã‚’ä½¿ã£ã¦èª¬æ˜ã•ã‚Œã‚‹ã“ã¨ãŒå¤šã„ã®ã§ã€ã“ã¡ã‚‰ã®æ–¹ãŒãƒ”ãƒ³ã¨æ¥ã‚‹äººã‚‚å¤šã„ã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ï¼Ÿ

## ç ´å£Šçš„ãƒ¡ã‚½ãƒƒãƒ‰ï¼çµ¶å¯¾æ‚ªã§ã¯ãªã„
ã€Œç ´å£Šçš„ãƒ¡ã‚½ãƒƒãƒ‰ã‚’çµ¶å¯¾ã«ä½¿ã†ãªï¼ã€ã¨ã„ã†è¶£æ—¨ã®è¨˜äº‹ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

[é¹¿é‡ã•ã‚“ã®ãƒã‚¹ãƒˆã¸ã®å¼•ç”¨ãƒã‚¹ãƒˆ](https://x.com/kensukesaitocom/status/1974244883155083584)ã§ã‚‚è¨€åŠã•ã‚Œã¦ã„ã‚‹æ–¹ãŒã„ã¾ã—ãŸãŒã€æ—¢ã«ä¸€æ™‚é…åˆ—ã«ãªã£ã¦ã„ã‚‹çŠ¶æ…‹ã§éç ´å£Šãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã†ã¨ã€å¿…è¦ä»¥ä¸Šã«ãƒ¡ãƒ¢ãƒªã‚’æ¶ˆè²»ã™ã‚‹ãªã©ã®ãƒ‡ãƒ¡ãƒªãƒƒãƒˆã‚‚ã‚ã‚‹ã®ã§ã€ã‚ãã¾ã§é©æé©æ‰€ã§ã™ã€‚

## è¨˜äº‹å†…ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã®å®Ÿè¡Œç’°å¢ƒã«ã¤ã„ã¦
ä¸€éƒ¨ TypeScript ã®ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ãŒã‚ã‚‹ãŸã‚ã€å®Ÿéš›ã«æ‰‹å…ƒã§å‹•ã‹ã—ã¦ã¿ãŸã„å ´åˆã¯ [TS Playground](https://www.typescriptlang.org/play/) ã§ã®å®Ÿè¡ŒãŒãŠã™ã™ã‚ã§ã™ã€‚

ãŸã ã—ã€`toSorted()` `toReversed()` `toSpliced()` `with()` ã¯ ECMAScript2023 / Node.js 20 ä»¥é™ã§ãªã„ã¨ä½¿ãˆã¾ã›ã‚“ã€‚[TS Playground](https://www.typescriptlang.org/play/) ã‚’ä½¿ã†å ´åˆã¯ TS Config ã‹ã‚‰ã€ŒTarget: ES2023ã€ã«è¨­å®šã—ã¦ã‹ã‚‰å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚


# æœ¬ç·¨
## 1. `sort()` â†’ `toSorted()`
é…åˆ—ã®è¦ç´ ã‚’ã‚½ãƒ¼ãƒˆã—ãŸã„å ´åˆã€ç ´å£Šçš„ãƒ¡ã‚½ãƒƒãƒ‰ã§ã‚ã‚‹ [`sort()`](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/sort) ã®ä»£ã‚ã‚Šã«éç ´å£Šç‰ˆã® [`toSorted()`](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/toSorted) ãŒä½¿ãˆã¾ã™ã€‚


```js:ç ´å£Šçš„
const numbers = [2, 3, 1, 4]

numbers.sort()
console.log(`numbers (after sort): ${numbers}`) // => 1,2,3,4
```

```js:éç ´å£Šçš„
const numbers = [2, 3, 1, 4]

const sortedNumbers = numbers.toSorted()
console.log(`numbers (after toSorted): ${numbers}`) // => 2,3,1,4
console.log(`sortedNumbers: ${sortedNumbers}`) // => 1,2,3,4
```

## 2. `reverse()` â†’ `toReversed()`
é…åˆ—ã®è¦ç´ ã‚’åè»¢ã•ã›ãŸã„å ´åˆã€ç ´å£Šçš„ãƒ¡ã‚½ãƒƒãƒ‰ã§ã‚ã‚‹ [`reverse()`](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/reverse) ã®ä»£ã‚ã‚Šã«éç ´å£Šç‰ˆã® [`toReversed()`](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/toReversed) ãŒä½¿ãˆã¾ã™ã€‚

```js:ç ´å£Šçš„
const numbers = [1, 1, 2, 3, 5, 8]

numbers.reverse()
console.log(`numbers after reverse: ${numbers}`) // => 8, 5, 3, 2, 1, 1
```

```js:éç ´å£Šçš„
const numbers = [1, 1, 2, 3, 5, 8]

const reversedNumbers = numbers.toReversed()
console.log(`numbers after toReversed: ${numbers}`) // => 1, 1, 2, 3, 5, 8
console.log(`reversedNumbers: ${reversedNumbers}`) // => 8, 5, 3, 2, 1, 1
```

## 3. `splice()` â†’ `toSpliced()`
æŒ‡å®šã•ã‚ŒãŸä½ç½®ã®è¦ç´ ã‚’å‰Šé™¤ãƒ»ç½®æ›ã—ãŸã‚Šã€æ–°ã—ã„è¦ç´ ã‚’è¿½åŠ ã—ãŸã‚Šã—ãŸã„å ´åˆã€ç ´å£Šçš„ãƒ¡ã‚½ãƒƒãƒ‰ã§ã‚ã‚‹ [`splice()`](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/splice) ã®ä»£ã‚ã‚Šã«éç ´å£Šç‰ˆã® [`toSpliced()`](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/toSpliced) ãŒä½¿ãˆã¾ã™ã€‚

### 3-1.è¦ç´ ã®å‰Šé™¤
```js:ç ´å£Šçš„
const characters = ['Taro', 'Hanako', 'Wally', 'Jiro']
const whereIsWally = characters.indexOf('Wally')

characters.splice(whereIsWally, 1)
console.log(`characters after splice: ${characters}`) // => Taro,Hanako,Jiro
```

```js:éç ´å£Šçš„
const characters = ['Taro', 'Hanako', 'Wally', 'Jiro']
const whereIsWally = characters.indexOf('Wally')

const others = characters.toSpliced(whereIsWally, 1)
console.log(`characters after toSpliced: ${characters}`) // => Taro,Hanako,Wally,Jiro
console.log(`others: ${others}`) // => Taro,Hanako,Jiro
```

### 3-2.è¦ç´ ã®ç½®æ›
```js:ç ´å£Šçš„
const characters = ['Taro', 'Hanako', 'Wally', 'Jiro']
const whereIsWally = characters.indexOf('Wally')

characters.splice(whereIsWally, 1, 'XXXX')
console.log(`characters after splice: ${characters}`) // => Taro,Hanako,XXXX,Jiro
```

```js:éç ´å£Šçš„
const characters = ['Taro', 'Hanako', 'Wally', 'Jiro']
const whereIsWally = characters.indexOf('Wally')

const maskedCharacters = characters.toSpliced(whereIsWally, 1, 'XXXX')
console.log(`characters after toSpliced: ${characters}`) // => Taro,Hanako,Wally,Jiro
console.log(`maskedCharacters: ${maskedCharacters}`) // => Taro,Hanako,XXXX,Jiro
```

### 3-3.è¦ç´ ã®è¿½åŠ 
```js:ç ´å£Šçš„
const characters = ['Taro', 'Hanako', 'Wally', 'Jiro']
const whereIsWally = characters.indexOf('Wally')

characters.splice(whereIsWally, 0, 'bunsin1')
characters.splice(whereIsWally + 2, 0, 'bunsin2')
console.log(`characters after splice: ${characters}`) // => Taro,Hanako,bunsin1,Wally,bunsin2,Jiro
```

```js:éç ´å£Šçš„
const characters = ['Taro', 'Hanako', 'Wally', 'Jiro']
const whereIsWally = characters.indexOf('Wally')

const bunsin = characters.toSpliced(whereIsWally, 0, 'bunsin1').toSpliced(whereIsWally + 2, 0, 'bunsin2')
console.log(`characters after toSpliced: ${characters}`) // => Taro,Hanako,Wally,Jiro
console.log(`bunsin: ${bunsin}`) // => Taro,Hanako,bunsin1,Wally,bunsin2,Jiro
```

## 4. `splice()` ã‚„ `array[i] = value` ã«ã‚ˆã‚‹ç½®æ› â†’ `with()`
æŒ‡å®šã•ã‚ŒãŸä½ç½®ã®è¦ç´ ã®ç½®æ›ã‚’ã—ãŸã„å ´åˆã€ç ´å£Šçš„æ“ä½œã‚’ã™ã‚‹ `splice()` ã‚„ `array[i]=` ã®ä»£ã‚ã‚Šã« [`with()`](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/with) ãŒä½¿ãˆã¾ã™ã€‚

```js:ç ´å£Šçš„
const characters = ['Taro', 'Hanako', 'Wally', 'Jiro']
const whereIsWally = characters.indexOf('Wally')

characters.splice(whereIsWally, 1, '----') // or characters[whereIsWally] = '----'
console.log(`characters after splice: ${characters}`) // => Taro,Hanako,----,Jiro
```

```js:éç ´å£Šçš„
const characters = ['Taro', 'Hanako', 'Wally', 'Jiro']
const whereIsWally = characters.indexOf('Wally')

const maskedCharacters = characters.with(whereIsWally, '----')
console.log(`characters after with: ${characters}`) // => Taro,Hanako,Wally,Jiro
console.log(`maskedCharacters: ${maskedCharacters}`) // => Taro,Hanako,----,Jiro
```

## 5. `unshift()` â†’ `toSpliced()`
é…åˆ—ã®å…ˆé ­ã«è¦ç´ ã‚’è¿½åŠ ã—ãŸã„å ´åˆã€ç ´å£Šçš„ãƒ¡ã‚½ãƒƒãƒ‰ã§ã‚ã‚‹ [`unshift()`](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/unshift) ã®ä»£ã‚ã‚Šã«å‰è¿°ã® [`toSpliced()`](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/toSpliced) ãŒä½¿ãˆã¾ã™ã€‚

```js:ç ´å£Šçš„
const titles = ['Z', 'A']

titles.unshift('X', 'Y')
console.log(`titles after unshift: ${titles}`) // => X,Y,Z,A
```

```js:éç ´å£Šçš„
const titles = ['Z', 'A']

const newTitles = titles.toSpliced(0, 0, 'X', 'Y')
console.log(`titles after toSpliced: ${titles}`) // => Z,A
console.log(`newTitles: ${newTitles}`) // => X,Y,Z,A
```

## 6. `push()` â†’ `concat()`
ï¼ˆES2023 å‰å¾Œã§å¤‰æ›´ç„¡ã—ï¼‰
é…åˆ—ã®æœ«å°¾ã«è¦ç´ ã‚’è¿½åŠ ã—ãŸã„å ´åˆã¯ã€ç ´å£Šçš„ãƒ¡ã‚½ãƒƒãƒ‰ã§ã‚ã‚‹ [`push()`](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/push) ã®ä»£ã‚ã‚Šã« [`concat()`](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/concat) ãŒä½¿ãˆã¾ã™ã€‚

```js:ç ´å£Šçš„
const colors = ['red', 'green']

colors.push('blue', 'Pikachu')
console.log(`colors after push: ${colors}`) // => red,green,blue,Pikachu
```

```js:éç ´å£Šçš„
const colors = ['red', 'green']

const newColors = colors.concat(['blue', 'Pikachu'])
console.log(`colors after concat: ${colors}`) // => red,green
console.log(`newColors: ${newColors}`) // => red,green,blue,Pikachu
```

## 7. `shift()` `pop()` â†’ `slice()`
ï¼ˆES2023 å‰å¾Œã§å¤‰æ›´ç„¡ã—ï¼‰
é…åˆ—ã®å…ˆé ­ãƒ»æœ«å°¾ã®è¦ç´ ã‚’å‰Šé™¤ã—ãŸã„å ´åˆã¯ã€ç ´å£Šçš„ãƒ¡ã‚½ãƒƒãƒ‰ã§ã‚ã‚‹ [`pop()`](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/pop) [`shift()`](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/shift) ã®ä»£ã‚ã‚Šã« [`slice()`](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/slice) ãŒä½¿ãˆã¾ã™ã€‚

```js:ç ´å£Šçš„
const planaria = ['head', 'body', 'tail']

planaria.shift()
planaria.pop()
console.log(`planaria after shift&pop: ${planaria}`) // => body
```

```js:éç ´å£Šçš„
const planaria = ['head', 'body', 'tail']

const newPlanaria = planaria.slice(1).slice(0, -1)
console.log(`planaria after slice: ${planaria}`) // => head,body,tail
console.log(`newPlanaria: ${newPlanaria}`) // => body
```

# è£œè¶³
## ECMAScript2023 ã®ãƒ¡ã‚½ãƒƒãƒ‰ãŒä½¿ãˆãªã„ç’°å¢ƒã§ã¯ã©ã†ã—ãŸã‚‰ï¼Ÿ
[ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰æ§‹æ–‡ (...)](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/Spread_syntax) ã‚’ä½¿ã£ã¦é…åˆ—ã‚’è¤‡è£½ã—ã¦ã‹ã‚‰ç ´å£Šçš„æ“ä½œã‚’ã—ã¾ã—ã‚‡ã†ã€‚

```js
const dna = ['A', 'T', 'G', 'C']
const newDna = [...dna]

// newDna ã«å¯¾ã—ã¦ç ´å£Šçš„æ“ä½œã‚’ã—ã¦ã‚‚ dna ã«ã¯å½±éŸ¿ãªã—
newDna.pop()
console.log(`dna: ${dna}`) // => A,T,G,C
```

ã•ã‚‰ã«ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰æ§‹æ–‡ã‚‚ä½¿ãˆãªã„ï¼ã¨ã„ã†å ´åˆã¯ `concat()` ã§ã‚‚é…åˆ—ã®è¤‡è£½ãŒã§ãã¾ã™ã€‚

```js
const dna = ['A', 'T', 'G', 'C']
const newDna = dna.concat()
```

## ç ´å£Šçš„ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã†ã¨å›°ã‚‹ã®ã¯ã©ã‚“ãªã¨ãï¼Ÿ
ä»¥ä¸‹ã®ä¾‹ã®ã‚ˆã†ã«å¼•æ•°ã®é…åˆ—ã«å¯¾ã—ã¦ç ´å£Šçš„æ“ä½œã‚’ã—ã¦ã—ã¾ã£ãŸã¨ãã§ã™ã€‚

ã“ã®å ´åˆã€ãƒ¡ã‚½ãƒƒãƒ‰ã®å‘¼ã³å‡ºã—å…ƒã§ç ´å£Šçš„æ“ä½œãŒã•ã‚ŒãŸã“ã¨ã«æ°—ã¥ã‹ãšã€å¼•æ•°ã«æ¸¡ã—ãŸé…åˆ—ã‚’ã•ã‚‰ã«åˆ¥ã®å‡¦ç†ã§ã‚‚ä½¿ã†ã“ã¨ã§äºˆæœŸã›ã¬ã‚¨ãƒ©ãƒ¼ã«ç¹‹ãŒã‚Šã¾ã™ã€‚

```js
const blackBoxSort = (array: number[]): number[] => {
    return array.sort()
}

const numbers = [2, 3, 1, 4]
const sortedNumbers = blackBoxSort(numbers)

// å¼•æ•°ã§æ¸¡ã—ãŸnumbersãŒå®Ÿã¯å¤‰æ›´ã•ã‚Œã¦ã—ã¾ã£ã¦ã„ã‚‹
console.log(`numbers: ${numbers}`) // => 1,2,3,4
```

## å¼•æ•°ã§ Array ã‚’å—ã‘å–ã‚‹ã«ã¯ `readonly` ã‚’ã¤ã‘ã‚‹ã¨å®‰å¿ƒ
TypeScript ã‚’ä½¿ã£ã¦ã„ã‚‹å ´åˆã€å¼•æ•°ã®é…åˆ—ã®å‹ã‚’ `readonly` ã«ã—ã¦ãŠãã“ã¨ã§ã€å®Ÿè¡Œå‰ã«ç ´å£Šçš„æ“ä½œã‚’æ¤œçŸ¥ã§ãã¾ã™ã€‚

```js
const blackBoxSort = (array: readonly number[]): number[] => {
    // Error: Property 'sort' does not exist on type 'readonly number[]'.
    return array.sort()
}
```

# å‚è€ƒ
https://typescriptbook.jp/reference/values-types-variables/array/array-operations
https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array

# å®£ä¼
ãƒªãƒ¼ãƒŠãƒ¼ã§ã¯ä¸€ç·’ã«åƒã„ã¦ãã‚Œã‚‹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚’å‹Ÿé›†ã—ã¦ã„ã¾ã™ï¼
https://careers.leaner.co.jp/engineering
